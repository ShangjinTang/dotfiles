# Reference: https://github.com/anishathalye/dotbot#directives
- clean: ['~']

# link cross-platform
- shell:
  - ["", ========== shell pre-execute ==========]
  - [git submodule update --init --recursive, Update submodules]
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
- link:
    ~/bin/: scripts/python/*
- link:
    ~/bin/: scripts/bash/*
- link:
    # submodules
    ~/.vim/autoload/plug.vim: submodules/vim-plug/plug.vim
    ~/.fzf: submodules/fzf
    ~/.tmux.conf: submodules/.tmux/.tmux.conf
    # configs
    ~/.vimrc: configs/.vimrc
    ~/.vim/coc-settings.json: configs/coc-settings.json
    ~/.gitconfig: configs/.gitconfig
    ~/.gitignore: configs/.gitignore
    ~/.tmux.conf.local: configs/.tmux.conf.local
    ~/.tmux.conf.theme.light: configs/.tmux.conf.theme.light
    ~/.tmux.conf.theme.dark: configs/.tmux.conf.theme.dark
    ~/.tmux.conf.theme.nord: configs/.tmux.conf.theme.nord
    ~/.clang-format: clang-configs/.clang-format
    ~/.clang-tidy: clang-configs/.clang-tidy
    ~/.ssh/: ssh/*
    # conditional configs
    ~/.config/tmuxinator/docker.yml:
      if: 'command -v tmuxinator'
      path: docker/tmuxinator-docker.yml
    ~/.vim/plugged/asyncrun.vim/autoload/asyncrun/runner/tmuxsol.vim:
      if: '[ -d ~/.vim/plugged/asyncrun.vim ]'
      path: configs/vim-plugins/asyncrun.vim/runner/tmuxsol.vim



# link for macOS
- shell:
  - ["", ========== macOS install ==========]
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
      if: '[ $(uname) = Darwin ]'
- link:
    ~/bin/: macos/bin/*
    ~/.tmux.conf.local.os: configs/.tmux.conf.local.macos
    ~/.dotfiles.os/gitmux: gitmux/gitmux.macos.amd64
    # macOS only
    ~/.hammerspoon: macos/hammerspoon
    ~/.config/karabiner/assets/complex_modifications/custom.json: macos/karabiner/custom.json
    ~/.config/clash/config.yaml: macos/clash/config.yaml



# link for Linux(Ubuntu)
- shell:
  - ["", ========== Linux install ==========]
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
      if: '[ $(uname) = Linux ]'
- link:
    ~/bin/: linux/bin/*
    ~/.tmux.conf.local.os: configs/.tmux.conf.local.linux
    ~/.dotfiles.os/gitmux: gitmux/gitmux.linux.amd64
    ~/.kaggle/kaggle.json: linux/.kaggle/kaggle.json



# zshrc
- shell:
  - ["", ========== update zshrc ==========]
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
      if: '[ $(basename $SHELL) = zsh ]'
- link:
    ~/.zshrc.pre: shell/shrc.pre
    ~/.zshrc: shell/zshrc
    ~/.zshrc.post: shell/shrc.post
    ~/.oh-my-zsh: submodules/ohmyzsh
    ~/.oh-my-zsh/custom/plugins/zsh-abbr: submodules/zsh-abbr
    ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions: submodules/zsh-autosuggestions
    ~/.oh-my-zsh/custom/plugins/zsh-completions: submodules/zsh-completions
    ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting: submodules/zsh-syntax-highlighting
    ~/.oh-my-zsh/custom/themes/sol.zsh-theme: shell/zsh_custom/themes/sol.zsh-theme
    ~/.config/zsh/abbreviations: configs/zsh-plugins/zsh-abbr/abbreviations

# zshrc + wsl
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
      if: '[ $(basename $SHELL) = zsh ] && grep -qEi "(Microsoft|WSL)" /proc/version'
- link:
    ~/.zshrc.wsl: shell/shrc.wsl



# bashrc
- shell:
  - ["", ========== update bashrc ==========]
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
      if: '[ $(basename $SHELL) = bash ]'
- link:
    ~/.bashrc.pre: shell/shrc.pre
    ~/.bashrc: shell/bashrc
    ~/.bashrc.post: shell/shrc.post

# bashrc + wsl
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
      if: '[ $(basename $SHELL) = bash ] && grep -qEi "(Microsoft|WSL)" /proc/version'
- link:
    ~/.bashrc.wsl: shell/shrc.wsl



# docker
- defaults:
    link:
      create: true
      relink: true
      force: true
      relative: false
      glob: true
      if: 'command -v docker'
- link:
    ~/docker/: docker/*



# Shell
- shell:
  - ["", ========== shell post-execute ==========]
  - [chmod 700 ~/.ssh && chmod 0600 ~/.ssh/vps_id_rsa, Avoid id_rsa permission too open]

